{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.0/components/ConsultButtons.tsx"],"sourcesContent":["\"use client\";\n\ntype LeadType = \"LOAN\" | \"INTERIOR\" | \"LEASE\";\n\nexport default function ConsultButtons({ listingId }: { listingId: number }) {\n  async function submit(type: LeadType) {\n    const res = await fetch(\"/api/leads\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ type, listingId, payload: { source: \"listing_detail\" } }),\n    });\n    if (!res.ok) {\n      const t = await res.text();\n      alert(`리드 생성 실패: ${t}`);\n      return;\n    }\n    alert(\"상담 요청 접수 완료\");\n  }\n\n  const base =\n    \"w-full h-10 rounded-xl font-semibold border shadow-sm active:scale-[0.99] transition\";\n  return (\n    <div className=\"grid grid-cols-3 gap-2\">\n      <button onClick={() => submit(\"LOAN\")} className={`${base} bg-sky-50 border-sky-200 text-sky-700`}>\n        대출상담\n      </button>\n      <button onClick={() => submit(\"INTERIOR\")} className={`${base} bg-sky-100 border-sky-300 text-sky-800`}>\n        인테리어상담\n      </button>\n      <button onClick={() => submit(\"LEASE\")} className={`${base} bg-sky-200 border-sky-400 text-sky-900`}>\n        임차상담\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAIe,SAAS,eAAe,EAAE,SAAS,EAAyB;IACzE,eAAe,OAAO,IAAc;QAClC,MAAM,MAAM,MAAM,MAAM,cAAc;YACpC,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAM;gBAAW,SAAS;oBAAE,QAAQ;gBAAiB;YAAE;QAChF;QACA,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,IAAI,MAAM,IAAI,IAAI;YACxB,MAAM,CAAC,UAAU,EAAE,GAAG;YACtB;QACF;QACA,MAAM;IACR;IAEA,MAAM,OACJ;IACF,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAO,SAAS,IAAM,OAAO;gBAAS,WAAW,GAAG,KAAK,sCAAsC,CAAC;0BAAE;;;;;;0BAGnG,6LAAC;gBAAO,SAAS,IAAM,OAAO;gBAAa,WAAW,GAAG,KAAK,uCAAuC,CAAC;0BAAE;;;;;;0BAGxG,6LAAC;gBAAO,SAAS,IAAM,OAAO;gBAAU,WAAW,GAAG,KAAK,uCAAuC,CAAC;0BAAE;;;;;;;;;;;;AAK3G;KA9BwB","debugId":null}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.0/components/ui/Input.tsx"],"sourcesContent":["\"use client\";\n\nimport cx from \"classnames\";\nimport { InputHTMLAttributes } from \"react\";\n\nexport default function Input({\n  className,\n  ...props\n}: InputHTMLAttributes<HTMLInputElement>) {\n  return (\n    <input\n      className={cx(\n        \"w-full rounded-xl border border-neutral-300 bg-white px-3 py-2 text-sm shadow-sm\",\n        \"placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-900/20\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAKe,SAAS,MAAM,EAC5B,SAAS,EACT,GAAG,OACmC;IACtC,qBACE,6LAAC;QACC,WAAW,IAAA,iJAAE,EACX,oFACA,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdwB","debugId":null}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.0/components/LeadModal.tsx"],"sourcesContent":["\"use client\";\n\nimport { LeadPayload, Listing } from \"@/lib/types\";\nimport { useState } from \"react\";\nimport Button from \"./ui/Button\";\nimport Input from \"./ui/Input\";\n\ninterface Props {\n  open: boolean;\n  listing: Listing | null;\n  leadType: \"loan\" | \"goodwill_eval\" | \"transfer_service\" | null;\n  onClose: () => void;\n}\n\nexport default function LeadModal({ open, listing, leadType, onClose }: Props) {\n  const [name, setName] = useState(\"\");\n  const [contact, setContact] = useState(\"\");\n  const [memo, setMemo] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n  const [doneMsg, setDoneMsg] = useState<string | null>(null);\n\n  if (!open || !leadType) return null;\n\n  async function handleSubmit() {\n    setSubmitting(true);\n    try {\n      const payload: LeadPayload = {\n        listing_id: listing?.id,\n        lead_type: leadType,\n        name,\n        phone_or_contact: contact,\n        memo\n      };\n\n      const res = await fetch(\"/api/leads\", {\n        method: \"POST\",\n        body: JSON.stringify(payload),\n        headers: { \"Content-Type\": \"application/json\" }\n      });\n\n      if (!res.ok) throw new Error(\"리드 생성 실패\");\n\n      const data = await res.json();\n      setDoneMsg(data.message || \"신청 완료되었습니다. 파트너 전문 상담사가 곧 연락드립니다.\");\n    } catch {\n      setDoneMsg(\"죄송합니다. 다시 시도해주세요.\");\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-[1000] flex items-center justify-center bg-black/30 p-4\">\n      <div className=\"w-full max-w-sm rounded-2xl bg-white shadow-card p-4 flex flex-col gap-4\">\n        <div className=\"text-sm font-semibold text-neutral-900 flex justify-between items-start\">\n          <div>\n            {leadType === \"loan\" && \"대출 상담 요청\"}\n            {leadType === \"goodwill_eval\" && \"권리금 평가 요청\"}\n            {leadType === \"transfer_service\" && \"양도/인허가 대행 문의\"}\n          </div>\n          <button\n            className=\"text-neutral-400 text-xs hover:text-neutral-600\"\n            onClick={onClose}\n          >\n            ✕\n          </button>\n        </div>\n\n        {listing && (\n          <div className=\"rounded-xl bg-neutral-100 p-3 text-[11px] leading-relaxed text-neutral-700\">\n            <div className=\"font-semibold text-neutral-900 mb-1\">\n              {listing.title} ({listing.address_area})\n            </div>\n            <div>권리금 {listing.goodwill_price ?? 0} / 월세 {listing.rent_monthly ?? 0}</div>\n          </div>\n        )}\n\n        <div className=\"flex flex-col gap-3 text-[13px]\">\n          <label className=\"flex flex-col gap-1\">\n            <span className=\"text-xs font-medium text-neutral-800\">\n              이름 <span className=\"text-red-500\">*</span>\n            </span>\n            <Input\n              placeholder=\"홍길동\"\n              value={name}\n              onChange={e => setName(e.target.value)}\n            />\n          </label>\n\n          <label className=\"flex flex-col gap-1\">\n            <span className=\"text-xs font-medium text-neutral-800\">\n              연락처(전화 또는 카톡ID) <span className=\"text-red-500\">*</span>\n            </span>\n            <Input\n              placeholder=\"010-0000-0000 / kakao:honggildong\"\n              value={contact}\n              onChange={e => setContact(e.target.value)}\n            />\n          </label>\n\n          <label className=\"flex flex-col gap-1\">\n            <span className=\"text-xs font-medium text-neutral-800\">\n              한줄 메모 (선택)\n            </span>\n            <input\n              className=\"w-full rounded-xl border border-neutral-300 bg-white px-3 py-2 text-sm shadow-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-900/20\"\n              placeholder=\"권리금이 적정한지 알고싶습니다\"\n              value={memo}\n              onChange={e => setMemo(e.target.value)}\n            />\n          </label>\n        </div>\n\n        {doneMsg && (\n          <div className=\"text-[12px] text-emerald-600 bg-emerald-50 rounded-xl p-2 leading-relaxed\">\n            {doneMsg}\n          </div>\n        )}\n\n        <Button disabled={submitting} onClick={handleSubmit}>\n          제출\n        </Button>\n\n        <div className=\"text-[10px] text-neutral-500 leading-relaxed\">\n          제출하시면 제휴 파트너 또는 내부 담당자가 연락을 드릴 수 있습니다. 개인정보는 이 목적에 한해 사용됩니다.\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;;;AALA;;;;AAce,SAAS,UAAU,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAS;;IAC3E,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAgB;IAEtD,IAAI,CAAC,QAAQ,CAAC,UAAU,OAAO;IAE/B,eAAe;QACb,cAAc;QACd,IAAI;YACF,MAAM,UAAuB;gBAC3B,YAAY,SAAS;gBACrB,WAAW;gBACX;gBACA,kBAAkB;gBAClB;YACF;YAEA,MAAM,MAAM,MAAM,MAAM,cAAc;gBACpC,QAAQ;gBACR,MAAM,KAAK,SAAS,CAAC;gBACrB,SAAS;oBAAE,gBAAgB;gBAAmB;YAChD;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAE7B,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,WAAW,KAAK,OAAO,IAAI;QAC7B,EAAE,OAAM;YACN,WAAW;QACb,SAAU;YACR,cAAc;QAChB;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;;gCACE,aAAa,UAAU;gCACvB,aAAa,mBAAmB;gCAChC,aAAa,sBAAsB;;;;;;;sCAEtC,6LAAC;4BACC,WAAU;4BACV,SAAS;sCACV;;;;;;;;;;;;gBAKF,yBACC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;gCACZ,QAAQ,KAAK;gCAAC;gCAAG,QAAQ,YAAY;gCAAC;;;;;;;sCAEzC,6LAAC;;gCAAI;gCAAK,QAAQ,cAAc,IAAI;gCAAE;gCAAO,QAAQ,YAAY,IAAI;;;;;;;;;;;;;8BAIzE,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAM,WAAU;;8CACf,6LAAC;oCAAK,WAAU;;wCAAuC;sDAClD,6LAAC;4CAAK,WAAU;sDAAe;;;;;;;;;;;;8CAEpC,6LAAC,wIAAK;oCACJ,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAA,IAAK,QAAQ,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;sCAIzC,6LAAC;4BAAM,WAAU;;8CACf,6LAAC;oCAAK,WAAU;;wCAAuC;sDACrC,6LAAC;4CAAK,WAAU;sDAAe;;;;;;;;;;;;8CAEjD,6LAAC,wIAAK;oCACJ,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAA,IAAK,WAAW,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;sCAI5C,6LAAC;4BAAM,WAAU;;8CACf,6LAAC;oCAAK,WAAU;8CAAuC;;;;;;8CAGvD,6LAAC;oCACC,WAAU;oCACV,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAA,IAAK,QAAQ,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;;gBAK1C,yBACC,6LAAC;oBAAI,WAAU;8BACZ;;;;;;8BAIL,6LAAC,yIAAM;oBAAC,UAAU;oBAAY,SAAS;8BAAc;;;;;;8BAIrD,6LAAC;oBAAI,WAAU;8BAA+C;;;;;;;;;;;;;;;;;AAMtE;GAnHwB;KAAA","debugId":null}},
    {"offset": {"line": 382, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.0/components/ListingDetailInfo.tsx"],"sourcesContent":["\"use client\";\n\nimport { Listing } from \"@/lib/types\";\nimport { formatCurrencyKRW, shortProofBadge } from \"@/lib/utils\";\nimport { useState } from \"react\";\nimport LeadModal from \"./LeadModal\";\nimport Button from \"./ui/Button\";\n\ninterface Props {\n  listing: Listing;\n}\n\nexport default function ListingDetailInfo({ listing }: Props) {\n  const [modalOpen, setModalOpen] = useState(false);\n  const [leadType, setLeadType] = useState<\"loan\"|\"goodwill_eval\"|\"transfer_service\"|null>(null);\n\n  function openLead(t: \"loan\"|\"goodwill_eval\"|\"transfer_service\") {\n    setLeadType(t);\n    setModalOpen(true);\n  }\n\n  const revenue = listing.financials?.monthly_revenue_avg_3m;\n  const proof = shortProofBadge(listing.proof_status);\n\n  return (\n    <>\n      {/* 이미지 영역 */}\n      <div className=\"w-full rounded-2xl overflow-hidden shadow-card bg-neutral-100 flex gap-2 p-2\">\n        {listing.media?.filter(m => m.is_public).map((m, idx) => (\n          <div key={idx} className=\"flex-1 min-w-[120px] h-28 rounded-xl overflow-hidden bg-neutral-200\">\n            {/* eslint-disable-next-line @next/next/no-img-element */}\n            <img\n              src={m.file_url}\n              alt={`${listing.title} photo ${idx+1}`}\n              className=\"w-full h-full object-cover\"\n            />\n          </div>\n        ))}\n        {(!listing.media || listing.media.filter(m => m.is_public).length === 0) && (\n          <div className=\"flex-1 h-28 flex items-center justify-center text-xs text-neutral-500\">\n            이미지 없음\n          </div>\n        )}\n      </div>\n\n      {/* 기본 정보 */}\n      <section className=\"bg-white rounded-2xl shadow-card border border-transparent p-4 flex flex-col gap-2\">\n        <div className=\"text-lg font-semibold text-neutral-900 leading-tight\">\n          {listing.title}{\" \"}\n          <span className=\"text-neutral-500 text-sm font-normal\">\n            ({listing.category})\n          </span>\n        </div>\n        <div className=\"text-sm text-neutral-600\">{listing.address_full}</div>\n\n        <div className=\"flex flex-wrap gap-x-6 gap-y-1 text-sm mt-2\">\n          <div>면적 {listing.area_pyeong ?? \"-\"}평</div>\n          <div>인수가능일 {listing.takeover_date ?? \"-\"}</div>\n        </div>\n\n        <div className=\"flex flex-wrap gap-x-6 gap-y-1 text-sm\">\n          <div>월세 {formatCurrencyKRW(listing.rent_monthly)}</div>\n          <div>관리비 {formatCurrencyKRW(listing.rent_mgmt_fee)}</div>\n          <div>보증금 {formatCurrencyKRW(listing.deposit)}</div>\n        </div>\n\n        <div className=\"flex flex-wrap gap-x-6 gap-y-1 text-sm\">\n          <div>권리금 {formatCurrencyKRW(listing.goodwill_price)}</div>\n          {listing.goodwill_negotiable && (\n            <div className=\"text-xs text-neutral-500\">협의 가능</div>\n          )}\n        </div>\n\n        <div className=\"text-sm\">\n          매출(3개월평균):{\" \"}\n          {revenue ? formatCurrencyKRW(revenue) : \"비공개\"}\n          {listing.financials?.revenue_verified && (\n            <span className=\"ml-2 text-[11px] text-emerald-600 font-medium\">\n              (POS확인)\n            </span>\n          )}\n        </div>\n\n        <div className=\"text-[11px] text-emerald-600 font-medium\">\n          {proof}\n        </div>\n      </section>\n\n      {/* 설명 */}\n      <section className=\"bg-white rounded-2xl shadow-card border border-transparent p-4 text-sm text-neutral-700 leading-relaxed\">\n        <div className=\"text-neutral-900 font-semibold mb-2\">\n          양도 사유\n        </div>\n        <div>{listing.description || \"사유 비공개\"}</div>\n      </section>\n\n      {/* CTA */}\n      <section className=\"bg-white rounded-2xl shadow-card border border-transparent p-4 flex flex-col gap-3\">\n        <div className=\"text-neutral-900 font-semibold text-sm\">\n          지금 바로 상담해보세요\n        </div>\n\n        <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs\">\n          <Button className=\"w-full\" onClick={() => openLead(\"loan\")}>\n            대출 상담 신청\n          </Button>\n          <Button\n            className=\"w-full bg-white text-neutral-900 border border-neutral-300 shadow-sm hover:bg-neutral-100\"\n            onClick={() => openLead(\"goodwill_eval\")}\n          >\n            권리금 평가 요청\n          </Button>\n          <Button\n            className=\"w-full bg-white text-neutral-900 border border-neutral-300 shadow-sm hover:bg-neutral-100\"\n            onClick={() => openLead(\"transfer_service\")}\n          >\n            양도/인허가 대행 문의\n          </Button>\n        </div>\n\n        <div className=\"text-[10px] text-neutral-500 leading-relaxed\">\n          제출 시 제휴 파트너 또는 내부 담당자가 연락드립니다. 개인정보는 이 목적에 한해 사용됩니다.\n        </div>\n      </section>\n\n      {/* 증빙 안내 */}\n      <section className=\"bg-white rounded-2xl shadow-card border border-transparent p-4 text-xs leading-relaxed text-neutral-700\">\n        <div className=\"text-neutral-900 font-semibold text-sm mb-2\">\n          제출된 증빙자료\n        </div>\n        <ul className=\"list-disc pl-4 space-y-1\">\n          <li>임대차계약서(임대료 확인)</li>\n          <li>POS 매출 캡처(최근 3개월)</li>\n          <li>개인정보 가리고 업로드, 내부 검수 완료</li>\n        </ul>\n      </section>\n\n      <LeadModal\n        open={modalOpen}\n        listing={listing}\n        leadType={leadType}\n        onClose={() => setModalOpen(false)}\n      />\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 767, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.0/components/ListingMap.tsx"],"sourcesContent":["// components/ListingMap.tsx\n\"use client\";\n\nimport type { Listing } from \"@/lib/mockData\";\nimport { useEffect, useRef, useState } from \"react\";\n\ndeclare global {\n  interface Window {\n    naver: any;\n    navermap_authFailure?: () => void;\n  }\n}\n\n// ✅ Web JS v3: openapi + ncpClientId (동작 확인된 방식)\nconst NAVER_CLIENT_ID =\n  process.env.NEXT_PUBLIC_NAVER_MAP_CLIENT_ID ?? \"hdlzlfn5o0\";\n\nexport default function ListingMap({\n  items,\n  selectedId,\n  onSelect,\n}: {\n  items: Listing[];\n  selectedId?: number | null;\n  onSelect?: (id: number) => void;\n}) {\n  const mapRef = useRef<HTMLDivElement | null>(null);\n  const mapObj = useRef<any>(null);\n  const markersRef = useRef<Record<number, any>>({});\n  const [loaded, setLoaded] = useState(false);\n  const [authFailed, setAuthFailed] = useState(false);\n\n  // 인증 실패 콜백\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n    window.navermap_authFailure = function () {\n      console.error(\"[NAVER MAP] Authentication Failed\");\n      setAuthFailed(true);\n    };\n  }, []);\n\n  // SDK 로드\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n    if (window.naver?.maps) {\n      setLoaded(true);\n      return;\n    }\n    const id = \"naver-map-sdk\";\n    let s = document.getElementById(id) as HTMLScriptElement | null;\n    const src = `https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=${NAVER_CLIENT_ID}&_=${Date.now()}`;\n    if (!s) {\n      s = document.createElement(\"script\");\n      s.id = id;\n      s.async = true;\n      s.defer = true;\n      document.head.appendChild(s);\n    }\n    s.src = src;\n    s.onload = () => {\n      console.log(\"[NAVER MAP] SDK loaded\", { ncpClientId: NAVER_CLIENT_ID });\n      setLoaded(true);\n    };\n    s.onerror = () => console.error(\"[NAVER MAP] SDK load error\");\n  }, []);\n\n  // 지도/마커\n  useEffect(() => {\n    if (!loaded || !mapRef.current || !window.naver?.maps || authFailed) return;\n    const { naver } = window;\n\n    const first = items[0];\n    const center = first\n      ? new naver.maps.LatLng(first.lat, first.lng)\n      : new naver.maps.LatLng(37.5665, 126.9780);\n    const map = new naver.maps.Map(mapRef.current, {\n      center,\n      zoom: 13,\n      zoomControl: true,\n      zoomControlOptions: { position: naver.maps.Position.TOP_RIGHT },\n    });\n    mapObj.current = map;\n\n    // 기존 마커 제거\n    Object.values(markersRef.current).forEach((m) => m.setMap(null));\n    markersRef.current = {};\n\n    // 마커 생성\n    const bounds = new naver.maps.LatLngBounds();\n    items.forEach((it) => {\n      const pos = new naver.maps.LatLng(it.lat, it.lng);\n      bounds.extend(pos);\n\n      const marker = new naver.maps.Marker({\n        map,\n        position: pos,\n      });\n      markersRef.current[it.id] = marker;\n\n      naver.maps.Event.addListener(marker, \"click\", () => {\n        onSelect?.(it.id);\n        map.panTo(pos);\n      });\n    });\n\n    if (items.length > 1) {\n      map.fitBounds(bounds, { top: 20, left: 20, right: 20, bottom: 20 });\n    }\n  }, [loaded, authFailed, items, onSelect]);\n\n  // 선택된 마커로 포커스\n  useEffect(() => {\n    if (!selectedId || !mapObj.current || !window.naver?.maps) return;\n    const marker = markersRef.current[selectedId];\n    if (!marker) return;\n    const pos = marker.getPosition();\n    mapObj.current.panTo(pos);\n    try {\n      marker.setAnimation(window.naver.maps.Animation.BOUNCE);\n      setTimeout(() => marker.setAnimation(null), 700);\n    } catch {}\n  }, [selectedId]);\n\n  return (\n    <div className=\"relative w-full h-64 rounded-2xl border border-neutral-200 overflow-hidden\">\n      <div ref={mapRef} className=\"w-full h-full\" />\n      {!loaded && (\n        <div className=\"absolute inset-0 flex items-center justify-center text-sm\">\n          지도를 불러오는 중…\n        </div>\n      )}\n      {authFailed && (\n        <div className=\"absolute inset-0 bg-white/85 backdrop-blur flex items-center justify-center p-4 text-xs\">\n          <div className=\"text-center\">\n            <div className=\"text-red-600 font-semibold mb-1\">\n              네이버 지도 인증 실패\n            </div>\n            <div className=\"text-neutral-700\">\n              Web 서비스 URL / ncpClientId 설정을 확인하세요.\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,4BAA4B;;;;;AAe1B;;AAXF;;;AAHA;;AAYA,iDAAiD;AACjD,MAAM,kBACJ,kDAA+C;AAElC,SAAS,WAAW,EACjC,KAAK,EACL,UAAU,EACV,QAAQ,EAKT;;IACC,MAAM,SAAS,IAAA,uKAAM,EAAwB;IAC7C,MAAM,SAAS,IAAA,uKAAM,EAAM;IAC3B,MAAM,aAAa,IAAA,uKAAM,EAAsB,CAAC;IAChD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,WAAW;IACX,IAAA,0KAAS;gCAAC;YACR;;YACA,OAAO,oBAAoB;wCAAG;oBAC5B,QAAQ,KAAK,CAAC;oBACd,cAAc;gBAChB;;QACF;+BAAG,EAAE;IAEL,SAAS;IACT,IAAA,0KAAS;gCAAC;YACR;;YACA,IAAI,OAAO,KAAK,EAAE,MAAM;gBACtB,UAAU;gBACV;YACF;YACA,MAAM,KAAK;YACX,IAAI,IAAI,SAAS,cAAc,CAAC;YAChC,MAAM,MAAM,CAAC,6DAA6D,EAAE,gBAAgB,GAAG,EAAE,KAAK,GAAG,IAAI;YAC7G,IAAI,CAAC,GAAG;gBACN,IAAI,SAAS,aAAa,CAAC;gBAC3B,EAAE,EAAE,GAAG;gBACP,EAAE,KAAK,GAAG;gBACV,EAAE,KAAK,GAAG;gBACV,SAAS,IAAI,CAAC,WAAW,CAAC;YAC5B;YACA,EAAE,GAAG,GAAG;YACR,EAAE,MAAM;wCAAG;oBACT,QAAQ,GAAG,CAAC,0BAA0B;wBAAE,aAAa;oBAAgB;oBACrE,UAAU;gBACZ;;YACA,EAAE,OAAO;wCAAG,IAAM,QAAQ,KAAK,CAAC;;QAClC;+BAAG,EAAE;IAEL,QAAQ;IACR,IAAA,0KAAS;gCAAC;YACR,IAAI,CAAC,UAAU,CAAC,OAAO,OAAO,IAAI,CAAC,OAAO,KAAK,EAAE,QAAQ,YAAY;YACrE,MAAM,EAAE,KAAK,EAAE,GAAG;YAElB,MAAM,QAAQ,KAAK,CAAC,EAAE;YACtB,MAAM,SAAS,QACX,IAAI,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,EAAE,MAAM,GAAG,IAC1C,IAAI,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS;YACnC,MAAM,MAAM,IAAI,MAAM,IAAI,CAAC,GAAG,CAAC,OAAO,OAAO,EAAE;gBAC7C;gBACA,MAAM;gBACN,aAAa;gBACb,oBAAoB;oBAAE,UAAU,MAAM,IAAI,CAAC,QAAQ,CAAC,SAAS;gBAAC;YAChE;YACA,OAAO,OAAO,GAAG;YAEjB,WAAW;YACX,OAAO,MAAM,CAAC,WAAW,OAAO,EAAE,OAAO;wCAAC,CAAC,IAAM,EAAE,MAAM,CAAC;;YAC1D,WAAW,OAAO,GAAG,CAAC;YAEtB,QAAQ;YACR,MAAM,SAAS,IAAI,MAAM,IAAI,CAAC,YAAY;YAC1C,MAAM,OAAO;wCAAC,CAAC;oBACb,MAAM,MAAM,IAAI,MAAM,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,EAAE,GAAG,GAAG;oBAChD,OAAO,MAAM,CAAC;oBAEd,MAAM,SAAS,IAAI,MAAM,IAAI,CAAC,MAAM,CAAC;wBACnC;wBACA,UAAU;oBACZ;oBACA,WAAW,OAAO,CAAC,GAAG,EAAE,CAAC,GAAG;oBAE5B,MAAM,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,QAAQ;gDAAS;4BAC5C,WAAW,GAAG,EAAE;4BAChB,IAAI,KAAK,CAAC;wBACZ;;gBACF;;YAEA,IAAI,MAAM,MAAM,GAAG,GAAG;gBACpB,IAAI,SAAS,CAAC,QAAQ;oBAAE,KAAK;oBAAI,MAAM;oBAAI,OAAO;oBAAI,QAAQ;gBAAG;YACnE;QACF;+BAAG;QAAC;QAAQ;QAAY;QAAO;KAAS;IAExC,cAAc;IACd,IAAA,0KAAS;gCAAC;YACR,IAAI,CAAC,cAAc,CAAC,OAAO,OAAO,IAAI,CAAC,OAAO,KAAK,EAAE,MAAM;YAC3D,MAAM,SAAS,WAAW,OAAO,CAAC,WAAW;YAC7C,IAAI,CAAC,QAAQ;YACb,MAAM,MAAM,OAAO,WAAW;YAC9B,OAAO,OAAO,CAAC,KAAK,CAAC;YACrB,IAAI;gBACF,OAAO,YAAY,CAAC,OAAO,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM;gBACtD;4CAAW,IAAM,OAAO,YAAY,CAAC;2CAAO;YAC9C,EAAE,OAAM,CAAC;QACX;+BAAG;QAAC;KAAW;IAEf,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,KAAK;gBAAQ,WAAU;;;;;;YAC3B,CAAC,wBACA,6LAAC;gBAAI,WAAU;0BAA4D;;;;;;YAI5E,4BACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCAAkC;;;;;;sCAGjD,6LAAC;4BAAI,WAAU;sCAAmB;;;;;;;;;;;;;;;;;;;;;;;AAQ9C;GAhIwB;KAAA","debugId":null}},
    {"offset": {"line": 976, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.0/components/PhotoGallery.tsx"],"sourcesContent":["\"use client\";\n\nimport Image from \"next/image\";\nimport { useState } from \"react\";\n\nexport default function PhotoGallery({\n  photos,\n  alt,\n}: {\n  photos: string[];\n  alt: string;\n}) {\n  const [idx, setIdx] = useState(0);\n  if (!photos || photos.length === 0) return null;\n\n  const current = photos[Math.min(idx, photos.length - 1)];\n\n  return (\n    <div className=\"w-full\">\n      {/* 메인 이미지 */}\n      <div className=\"relative w-full aspect-[16/9] overflow-hidden rounded-2xl border\">\n        <Image\n          src={current}\n          alt={alt}\n          fill\n          sizes=\"(max-width: 768px) 100vw, 720px\"\n          style={{ objectFit: \"cover\" }}\n          priority\n        />\n      </div>\n\n      {/* 썸네일 리스트 */}\n      {photos.length > 1 && (\n        <div className=\"mt-2 flex gap-2 overflow-x-auto\">\n          {photos.map((p, i) => (\n            <button\n              key={p + i}\n              onClick={() => setIdx(i)}\n              className={[\n                \"relative h-16 w-24 rounded-lg overflow-hidden border\",\n                i === idx ? \"ring-2 ring-emerald-500 border-emerald-500\" : \"border-neutral-200\",\n              ].join(\" \")}\n              aria-label={`사진 ${i + 1}`}\n            >\n              <Image\n                src={p}\n                alt={`${alt} - ${i + 1}`}\n                fill\n                sizes=\"96px\"\n                style={{ objectFit: \"cover\" }}\n              />\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS,aAAa,EACnC,MAAM,EACN,GAAG,EAIJ;;IACC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,yKAAQ,EAAC;IAC/B,IAAI,CAAC,UAAU,OAAO,MAAM,KAAK,GAAG,OAAO;IAE3C,MAAM,UAAU,MAAM,CAAC,KAAK,GAAG,CAAC,KAAK,OAAO,MAAM,GAAG,GAAG;IAExD,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,2IAAK;oBACJ,KAAK;oBACL,KAAK;oBACL,IAAI;oBACJ,OAAM;oBACN,OAAO;wBAAE,WAAW;oBAAQ;oBAC5B,QAAQ;;;;;;;;;;;YAKX,OAAO,MAAM,GAAG,mBACf,6LAAC;gBAAI,WAAU;0BACZ,OAAO,GAAG,CAAC,CAAC,GAAG,kBACd,6LAAC;wBAEC,SAAS,IAAM,OAAO;wBACtB,WAAW;4BACT;4BACA,MAAM,MAAM,+CAA+C;yBAC5D,CAAC,IAAI,CAAC;wBACP,cAAY,CAAC,GAAG,EAAE,IAAI,GAAG;kCAEzB,cAAA,6LAAC,2IAAK;4BACJ,KAAK;4BACL,KAAK,GAAG,IAAI,GAAG,EAAE,IAAI,GAAG;4BACxB,IAAI;4BACJ,OAAM;4BACN,OAAO;gCAAE,WAAW;4BAAQ;;;;;;uBAbzB,IAAI;;;;;;;;;;;;;;;;AAqBvB;GApDwB;KAAA","debugId":null}},
    {"offset": {"line": 1067, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.0/app/listing/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport ConsultButtons from \"@/components/ConsultButtons\";\nimport ListingDetailInfo from \"@/components/ListingDetailInfo\";\nimport ListingMap from \"@/components/ListingMap\";\nimport PhotoGallery from \"@/components/PhotoGallery\";\nimport TopNav from \"@/components/TopNav\";\nimport { useRouter } from \"next/navigation\";\nimport { use, useEffect, useState } from \"react\";\n\nexport default function ListingDetailPage({ params }: { params: Promise<{ id: string }> }) {\n  const router = useRouter();\n  const { id } = use(params);\n  const [listing, setListing] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function fetchDetail() {\n      try {\n        const res = await fetch(`/api/listings/${id}`);\n        if (res.ok) {\n          const data = await res.json();\n          setListing(data);\n        }\n      } catch (error) {\n        console.error(\"데이터 로드 실패:\", error);\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchDetail();\n  }, [id]);\n\n  // ✅ 양식은 그대로 유지하되, 채팅 로직만 수정\n  const startChat = async (type: string) => {\n    if (!listing) return;\n    try {\n      const res = await fetch(\"/api/chat/threads\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        // [핵심] 현재 브라우저의 로그인 쿠키를 강제로 포함해서 보냅니다.\n        credentials: \"same-origin\", \n        body: JSON.stringify({\n          type,\n          listingId: listing.id,\n          title: listing.title,\n        }),\n      });\n\n      if (res.status === 401) {\n        alert(\"로그인이 필요하거나 세션이 만료되었습니다.\");\n        router.push(`/login?callbackUrl=/listing/${id}`);\n        return;\n      }\n\n      const data = await res.json();\n      if (data.thread?.id) {\n        router.push(`/chat/${data.thread.id}?role=user`);\n      }\n    } catch (e) {\n      alert(\"채팅방 생성 중 오류가 발생했습니다.\");\n    }\n  };\n\n  if (loading) return <div className=\"p-20 text-center\">불러오는 중...</div>;\n  if (!listing) return <div className=\"p-20 text-center\">매물을 찾을 수 없습니다.</div>;\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <TopNav />\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\n        {/* 원래 사용하시던 컴포넌트 양식 그대로 유지 */}\n        <PhotoGallery photos={listing.photos} />\n        \n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-8\">\n          <div className=\"lg:col-span-2\">\n            <ListingDetailInfo listing={listing} />\n            <div className=\"mt-8\">\n              <h2 className=\"text-2xl font-bold mb-4\">위치 정보</h2>\n              <ListingMap lat={listing.lat} lng={listing.lng} address={listing.address_area} />\n            </div>\n          </div>\n          \n          <div className=\"lg:col-span-1\">\n            {/* 우측 고정 버튼 영역 */}\n            <div className=\"sticky top-24\">\n              <ConsultButtons \n                onChatClick={() => startChat(\"listing\")} \n                listing={listing}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AARA;;;;;;;;AAUe,SAAS,kBAAkB,EAAE,MAAM,EAAuC;;IACvF,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,EAAE,EAAE,GAAG,IAAA,oKAAG,EAAC;IACnB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAM;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;uCAAC;YACR,eAAe;gBACb,IAAI;oBACF,MAAM,MAAM,MAAM,MAAM,CAAC,cAAc,EAAE,IAAI;oBAC7C,IAAI,IAAI,EAAE,EAAE;wBACV,MAAM,OAAO,MAAM,IAAI,IAAI;wBAC3B,WAAW;oBACb;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,cAAc;gBAC9B,SAAU;oBACR,WAAW;gBACb;YACF;YACA;QACF;sCAAG;QAAC;KAAG;IAEP,4BAA4B;IAC5B,MAAM,YAAY,OAAO;QACvB,IAAI,CAAC,SAAS;QACd,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,qBAAqB;gBAC3C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,uCAAuC;gBACvC,aAAa;gBACb,MAAM,KAAK,SAAS,CAAC;oBACnB;oBACA,WAAW,QAAQ,EAAE;oBACrB,OAAO,QAAQ,KAAK;gBACtB;YACF;YAEA,IAAI,IAAI,MAAM,KAAK,KAAK;gBACtB,MAAM;gBACN,OAAO,IAAI,CAAC,CAAC,4BAA4B,EAAE,IAAI;gBAC/C;YACF;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,KAAK,MAAM,EAAE,IAAI;gBACnB,OAAO,IAAI,CAAC,CAAC,MAAM,EAAE,KAAK,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC;YACjD;QACF,EAAE,OAAO,GAAG;YACV,MAAM;QACR;IACF;IAEA,IAAI,SAAS,qBAAO,6LAAC;QAAI,WAAU;kBAAmB;;;;;;IACtD,IAAI,CAAC,SAAS,qBAAO,6LAAC;QAAI,WAAU;kBAAmB;;;;;;IAEvD,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,mIAAM;;;;;0BACP,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC,yIAAY;wBAAC,QAAQ,QAAQ,MAAM;;;;;;kCAEpC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,8IAAiB;wCAAC,SAAS;;;;;;kDAC5B,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;0DAA0B;;;;;;0DACxC,6LAAC,uIAAU;gDAAC,KAAK,QAAQ,GAAG;gDAAE,KAAK,QAAQ,GAAG;gDAAE,SAAS,QAAQ,YAAY;;;;;;;;;;;;;;;;;;0CAIjF,6LAAC;gCAAI,WAAU;0CAEb,cAAA,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,2IAAc;wCACb,aAAa,IAAM,UAAU;wCAC7B,SAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQzB;GAtFwB;;QACP,kJAAS;;;KADF","debugId":null}}]
}