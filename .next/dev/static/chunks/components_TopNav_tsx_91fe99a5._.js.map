{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.0/components/TopNav.tsx"],"sourcesContent":["\"use client\";\n\nimport { signOut, useSession } from \"next-auth/react\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport useSWR from \"swr\";\n\nconst fetcher = (url: string) =>\n  fetch(url, { cache: \"no-store\" }).then((r) => r.json());\n\nexport default function TopNav() {\n  const pathname = usePathname();\n  const isAdminPath = pathname?.startsWith(\"/admin\");\n  const { data: session } = useSession();\n  const role = (session?.user as any)?.role as \"ADMIN\" | \"CLIENT\" | undefined;\n\n  // (선택) 채팅 배지 API 있으면 유지\n  const { data } = useSWR<\n    { ok: boolean; admin: number; user: number; total: number } | undefined\n  >(\"/api/chat/unread\", fetcher, {\n    refreshInterval: 3000,\n    revalidateOnFocus: true,\n    refreshWhenHidden: false,\n  });\n  const count = isAdminPath ? (data?.admin ?? 0) : (data?.user ?? 0);\n\n  return (\n    <nav className=\"sticky top-0 z-40 bg-white/80 backdrop-blur border-b\">\n      <div className=\"max-w-6xl mx-auto flex items-center justify-between px-4 py-2\">\n        <Link href=\"/\" className=\"font-semibold\">권리금중개앱</Link>\n\n        <div className=\"flex items-center gap-2\">\n          {role === \"ADMIN\" && (\n            <Link href=\"/admin/leads\" className=\"rounded-lg border px-3 py-1.5 text-sm hover:bg-neutral-50\">\n              관리자\n            </Link>\n          )}\n\n          {session?.user && (\n            <Link href=\"/listing/mine\"\n                  className=\"rounded-lg bg-white text-black px-3 py-1.5 text-sm hover:bg-neutral-50\">\n              내 매물 목록\n            </Link>\n          )}\n\n          {session?.user && (\n            <Link href=\"/listing/new\"\n                  className=\"rounded-lg bg-white text-black px-3 py-1.5 text-sm hover:bg-neutral-50\">\n              내 매물 등록\n            </Link>\n          )}\n\n          <Link\n            href=\"/admin/chat\"\n            className=\"relative rounded-lg py-1.5 text-sm hover:bg-neutral-50\"\n            title=\"채팅\"\n          >\n            채팅\n            <span className=\"ml-2 inline-flex items-center justify-center min-w-[24px] h-6 px-2 text-xs rounded-full bg-sky-500 text-white\">\n              {count}\n            </span>\n          </Link>\n\n          {session?.user ? (\n            <>\n              <span className=\"hidden sm:inline text-sm text-neutral-700 px-2\">\n                {session.user.name ?? session.user.email}\n              </span>\n              <button\n                onClick={() => signOut({ callbackUrl: \"/\" })}\n                className=\"rounded-lg py-1.5 text-sm hover:bg-neutral-50\"\n              >\n                로그아웃\n              </button>\n            </>\n          ) : (\n            <>\n              <Link href=\"/login\" className=\"rounded-lg py-1.5 text-sm hover:bg-neutral-50\">\n                로그인\n              </Link>\n              <Link href=\"/register\" className=\"rounded-lg py-1.5 text-sm hover:bg-neutral-50\">\n                회원가입\n              </Link>\n            </>\n          )}\n        </div>\n      </div>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOA,MAAM,UAAU,CAAC,MACf,MAAM,KAAK;QAAE,OAAO;IAAW,GAAG,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI;AAEvC,SAAS;;IACtB,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,cAAc,UAAU,WAAW;IACzC,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,sJAAU;IACpC,MAAM,OAAQ,SAAS,MAAc;IAErC,wBAAwB;IACxB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,4KAAM,EAErB,oBAAoB,SAAS;QAC7B,iBAAiB;QACjB,mBAAmB;QACnB,mBAAmB;IACrB;IACA,MAAM,QAAQ,cAAe,MAAM,SAAS,IAAM,MAAM,QAAQ;IAEhE,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC,0KAAI;oBAAC,MAAK;oBAAI,WAAU;8BAAgB;;;;;;8BAEzC,6LAAC;oBAAI,WAAU;;wBACZ,SAAS,yBACR,6LAAC,0KAAI;4BAAC,MAAK;4BAAe,WAAU;sCAA4D;;;;;;wBAKjG,SAAS,sBACR,6LAAC,0KAAI;4BAAC,MAAK;4BACL,WAAU;sCAAyE;;;;;;wBAK1F,SAAS,sBACR,6LAAC,0KAAI;4BAAC,MAAK;4BACL,WAAU;sCAAyE;;;;;;sCAK3F,6LAAC,0KAAI;4BACH,MAAK;4BACL,WAAU;4BACV,OAAM;;gCACP;8CAEC,6LAAC;oCAAK,WAAU;8CACb;;;;;;;;;;;;wBAIJ,SAAS,qBACR;;8CACE,6LAAC;oCAAK,WAAU;8CACb,QAAQ,IAAI,CAAC,IAAI,IAAI,QAAQ,IAAI,CAAC,KAAK;;;;;;8CAE1C,6LAAC;oCACC,SAAS,IAAM,IAAA,mJAAO,EAAC;4CAAE,aAAa;wCAAI;oCAC1C,WAAU;8CACX;;;;;;;yDAKH;;8CACE,6LAAC,0KAAI;oCAAC,MAAK;oCAAS,WAAU;8CAAgD;;;;;;8CAG9E,6LAAC,0KAAI;oCAAC,MAAK;oCAAY,WAAU;8CAAgD;;;;;;;;;;;;;;;;;;;;;;;;;AAS/F;GA/EwB;;QACL,oJAAW;QAEF,sJAAU;QAInB,4KAAM;;;KAPD","debugId":null}}]
}