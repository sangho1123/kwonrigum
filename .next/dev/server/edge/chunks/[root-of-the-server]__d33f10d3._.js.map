{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/lib/db.ts"],"sourcesContent":["// lib/db.ts\nimport { PrismaClient } from \"@prisma/client\";\n\nconst globalForPrisma = globalThis as unknown as { prisma?: PrismaClient };\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: process.env.NODE_ENV === \"development\" ? [\"query\", \"error\", \"warn\"] : [\"error\"],\n  });\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":"AAAA,YAAY;;;;;AACZ;;AAEA,MAAM,kBAAkB;AAEjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,qKAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;AAC7E;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/ (unsupported edge import 'crypto')"],"sourcesContent":["__turbopack_context__.n(__import_unsupported(`crypto`));\n"],"names":[],"mappings":"AAAA,sBAAsB,CAAC,CAAC,qBAAqB,CAAC,MAAM,CAAC"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/ (unsupported edge import 'http')"],"sourcesContent":["__turbopack_context__.n(__import_unsupported(`http`));\n"],"names":[],"mappings":"AAAA,sBAAsB,CAAC,CAAC,qBAAqB,CAAC,IAAI,CAAC"}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/ (unsupported edge import 'querystring')"],"sourcesContent":["__turbopack_context__.n(__import_unsupported(`querystring`));\n"],"names":[],"mappings":"AAAA,sBAAsB,CAAC,CAAC,qBAAqB,CAAC,WAAW,CAAC"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/ (unsupported edge import 'https')"],"sourcesContent":["__turbopack_context__.n(__import_unsupported(`https`));\n"],"names":[],"mappings":"AAAA,sBAAsB,CAAC,CAAC,qBAAqB,CAAC,KAAK,CAAC"}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/lib/auth.ts"],"sourcesContent":["// lib/auth.ts  (v4 호환 버전)\nimport { prisma } from \"@/lib/db\";\nimport { compare } from \"bcryptjs\";\nimport type { NextAuthOptions } from \"next-auth\";\nimport { getServerSession } from \"next-auth\";\nimport CredentialsProvider from \"next-auth/providers/credentials\";\n\nexport const authOptions: NextAuthOptions = {\n  session: { strategy: \"jwt\" },\n  providers: [\n    CredentialsProvider({\n      name: \"credentials\",\n      credentials: {\n        email: { label: \"email\", type: \"text\" },\n        password: { label: \"password\", type: \"password\" },\n      },\n      async authorize(credentials) {\n        const email = credentials?.email?.trim().toLowerCase() || \"\";\n        const password = credentials?.password || \"\";\n\n        const user = await prisma.user.findUnique({\n          where: { email },\n          select: { id: true, email: true, name: true, role: true, password: true },\n        });\n        if (!user) return null;\n\n        const ok = await compare(password, user.password);\n        if (!ok) return null;\n\n        return { id: user.id, email: user.email, name: user.name, role: user.role as any };\n      },\n    }),\n  ],\n  callbacks: {\n    async jwt({ token, user }) {\n      if (user) {\n        token.role = (user as any).role;\n      }\n      return token;\n    },\n    async session({ session, token }) {\n      if (session.user) {\n        (session.user as any).role = token.role;\n      }\n      return session;\n    },\n  },\n};\n\n// 서버 컴포넌트/route에서 세션 가져올 때 사용\nexport function auth() {\n  return getServerSession(authOptions);\n}\n\n// 클라이언트 훅/액션용\nexport { signIn, signOut } from \"next-auth/react\";\n"],"names":[],"mappings":"AAAA,0BAA0B;;;;;;;AAC1B;AACA;AAEA;AACA;AAiDA,cAAc;AACd;;;;;AAhDO,MAAM,cAA+B;IAC1C,SAAS;QAAE,UAAU;IAAM;IAC3B,WAAW;QACT,IAAA,2KAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAO;gBACtC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW;gBACzB,MAAM,QAAQ,aAAa,OAAO,OAAO,iBAAiB;gBAC1D,MAAM,WAAW,aAAa,YAAY;gBAE1C,MAAM,OAAO,MAAM,2HAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACxC,OAAO;wBAAE;oBAAM;oBACf,QAAQ;wBAAE,IAAI;wBAAM,OAAO;wBAAM,MAAM;wBAAM,MAAM;wBAAM,UAAU;oBAAK;gBAC1E;gBACA,IAAI,CAAC,MAAM,OAAO;gBAElB,MAAM,KAAK,MAAM,IAAA,oJAAO,EAAC,UAAU,KAAK,QAAQ;gBAChD,IAAI,CAAC,IAAI,OAAO;gBAEhB,OAAO;oBAAE,IAAI,KAAK,EAAE;oBAAE,OAAO,KAAK,KAAK;oBAAE,MAAM,KAAK,IAAI;oBAAE,MAAM,KAAK,IAAI;gBAAQ;YACnF;QACF;KACD;IACD,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,MAAM,IAAI,GAAG,AAAC,KAAa,IAAI;YACjC;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,QAAQ,IAAI,EAAE;gBACf,QAAQ,IAAI,CAAS,IAAI,GAAG,MAAM,IAAI;YACzC;YACA,OAAO;QACT;IACF;AACF;AAGO,SAAS;IACd,OAAO,IAAA,iKAAgB,EAAC;AAC1B"}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["// middleware.ts (프로젝트 루트)\n// Next 16 + next-auth v5 패턴\n\nimport { auth } from \"@/lib/auth\"; // 너의 auth 설정 위치\nimport type { Session } from \"next-auth\";\nimport type { NextRequest } from \"next/server\";\nimport { NextResponse } from \"next/server\";\n\n// next-auth v5의 auth 콜백에 들어오는 req에 .auth가 붙어있다고 가정\ntype RequestWithAuth = NextRequest & { auth: Session | null };\n\nexport default auth((req: RequestWithAuth) => {\n  const { nextUrl } = req;\n\n  // 보호할 경로만 먼저 최소로 잡자 (필요시 확장)\n  const isProtected = nextUrl.pathname.startsWith(\"/admin\");\n\n  if (isProtected && !req.auth) {\n    // 로그인 안됐는데 보호 경로 접근 → 로그인으로\n    return NextResponse.redirect(new URL(\"/login\", nextUrl));\n  }\n\n  // 통과\n  return NextResponse.next();\n});\n\n// 어떤 경로에 미들웨어를 적용할지 명시\nexport const config = {\n  matcher: [\"/admin/:path*\"],\n};\n"],"names":[],"mappings":"AAAA,0BAA0B;AAC1B,4BAA4B;;;;;;;AAE5B,oOAAmC,gBAAgB;AAGnD;AAAA;;;uCAKe,IAAA,2IAAI,EAAC,CAAC;IACnB,MAAM,EAAE,OAAO,EAAE,GAAG;IAEpB,6BAA6B;IAC7B,MAAM,cAAc,QAAQ,QAAQ,CAAC,UAAU,CAAC;IAEhD,IAAI,eAAe,CAAC,IAAI,IAAI,EAAE;QAC5B,4BAA4B;QAC5B,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU;IACjD;IAEA,KAAK;IACL,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAGO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAgB;AAC5B"}}]
}