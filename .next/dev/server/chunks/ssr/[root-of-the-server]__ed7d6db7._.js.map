{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.1/lib/db.ts"],"sourcesContent":["// lib/db.ts\nimport { PrismaClient } from \"@prisma/client\";\n\nconst globalForPrisma = globalThis as unknown as { prisma?: PrismaClient };\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: process.env.NODE_ENV === \"development\" ? [\"query\", \"error\", \"warn\"] : [\"error\"],\n  });\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":"AAAA,YAAY;;;;;AACZ;;AAEA,MAAM,kBAAkB;AAEjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;AAC7E;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.1/lib/auth.ts"],"sourcesContent":["// lib/auth.ts\nimport { prisma } from \"@/lib/db\";\nimport { compare } from \"bcryptjs\";\nimport NextAuth, { type NextAuthConfig } from \"next-auth\";\nimport Credentials from \"next-auth/providers/credentials\";\n\nexport const authOptions: NextAuthConfig = {\n  trustHost: true,\n  session: { strategy: \"jwt\" },\n  pages: { signIn: \"/login\" },\n  providers: [\n    Credentials({\n      name: \"Credentials\",\n      credentials: {\n        email: { label: \"Ïù¥Î©îÏùº\", type: \"email\" },\n        password: { label: \"ÎπÑÎ∞ÄÎ≤àÌò∏\", type: \"password\" },\n      },\n      authorize: async (creds) => {\n        const email =\n          typeof creds?.email === \"string\" ? creds.email.trim().toLowerCase() : \"\";\n        const password =\n          typeof creds?.password === \"string\" ? creds.password.trim() : \"\";\n      \n        if (!email || !password) return null;\n      \n        const user = await prisma.user.findUnique({\n          where: { email },\n          select: { id: true, email: true, name: true, role: true, password: true },\n        });\n        if (!user || !user.password) return null;\n      \n        const ok = await compare(password, user.password);\n        if (!ok) return null;\n      \n        return {\n          id: user.id,\n          name: user.name ?? user.email,\n          email: user.email,\n          role: user.role,\n        } as any;\n      }\n    }),\n  ],\n  callbacks: {\n    async jwt({ token, user }: { token: import(\"next-auth/jwt\").JWT; user?: any }) {\n      if (user) {\n        token.id = user.id;\n        token.role = user.role;\n      }\n      return token;\n    },\n    async session({\n      session,\n      token,\n    }: {\n      session: import(\"next-auth\").Session;\n      token: import(\"next-auth/jwt\").JWT;\n    }) {\n      if (session.user) {\n        (session.user as any).id = token.id as string;\n        (session.user as any).role = token.role as string;\n      }\n      return session;\n    },\n  },\n};\n\nexport const { handlers, auth, signIn, signOut } = NextAuth(authOptions);\n"],"names":[],"mappings":"AAAA,cAAc;;;;;;;;;;;;;AACd;AACA;AACA;AACA;AAAA;;;;;AAEO,MAAM,cAA8B;IACzC,WAAW;IACX,SAAS;QAAE,UAAU;IAAM;IAC3B,OAAO;QAAE,QAAQ;IAAS;IAC1B,WAAW;QACT,IAAA,qKAAW,EAAC;YACV,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAO,MAAM;gBAAQ;gBACrC,UAAU;oBAAE,OAAO;oBAAQ,MAAM;gBAAW;YAC9C;YACA,WAAW,OAAO;gBAChB,MAAM,QACJ,OAAO,OAAO,UAAU,WAAW,MAAM,KAAK,CAAC,IAAI,GAAG,WAAW,KAAK;gBACxE,MAAM,WACJ,OAAO,OAAO,aAAa,WAAW,MAAM,QAAQ,CAAC,IAAI,KAAK;gBAEhE,IAAI,CAAC,SAAS,CAAC,UAAU,OAAO;gBAEhC,MAAM,OAAO,MAAM,mHAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACxC,OAAO;wBAAE;oBAAM;oBACf,QAAQ;wBAAE,IAAI;wBAAM,OAAO;wBAAM,MAAM;wBAAM,MAAM;wBAAM,UAAU;oBAAK;gBAC1E;gBACA,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE,OAAO;gBAEpC,MAAM,KAAK,MAAM,IAAA,4IAAO,EAAC,UAAU,KAAK,QAAQ;gBAChD,IAAI,CAAC,IAAI,OAAO;gBAEhB,OAAO;oBACL,IAAI,KAAK,EAAE;oBACX,MAAM,KAAK,IAAI,IAAI,KAAK,KAAK;oBAC7B,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,IAAI;gBACjB;YACF;QACF;KACD;IACD,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAsD;YAC3E,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,IAAI,GAAG,KAAK,IAAI;YACxB;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EACZ,OAAO,EACP,KAAK,EAIN;YACC,IAAI,QAAQ,IAAI,EAAE;gBACf,QAAQ,IAAI,CAAS,EAAE,GAAG,MAAM,EAAE;gBAClC,QAAQ,IAAI,CAAS,IAAI,GAAG,MAAM,IAAI;YACzC;YACA,OAAO;QACT;IACF;AACF;AAEO,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,gKAAQ,EAAC","debugId":null}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.1/app/mypage/page.tsx"],"sourcesContent":["// app/mypage/page.tsx\nimport { auth } from \"@/lib/auth\";\nimport { PrismaClient } from \"@prisma/client\";\nimport Link from \"next/link\";\nimport { redirect } from \"next/navigation\";\n\nconst prisma = new PrismaClient();\n\nexport default async function MyPage() {\n  const session = await auth();\n  if (!session?.user?.email) {\n    redirect(\"/login\");\n  }\n\n  // Î°úÍ∑∏Ïù∏Ìïú Ïú†Ï†ÄÏùò Ï†ïÎ≥¥ÏôÄ Í¥ÄÎ†®Îêú Îç∞Ïù¥ÌÑ∞(Îì±Î°ù Îß§Î¨º, Ï±ÑÌåÖ Í∏∞Î°ù)Î•º Î™®Îëê Î∂àÎü¨ÏòµÎãàÎã§.\n  const user = await prisma.user.findUnique({\n    where: { email: session.user.email },\n    include: {\n      listings: {\n        orderBy: { createdAt: \"desc\" }\n      },\n      threads: {\n        include: { listing: true },\n        orderBy: { createdAt: \"desc\" }\n      },\n      // üí° Ïù¥ Î∂ÄÎ∂ÑÏù¥ Ï∂îÍ∞ÄÎêòÏñ¥Ïïº Ìï©ÎãàÎã§!\n      favorites: { \n        include: { listing: true }, // Ï∞úÌïú Îß§Î¨ºÏùò ÏÉÅÏÑ∏ Ï†ïÎ≥¥ÎèÑ Í∞ôÏù¥ Í∞ÄÏ†∏Ïò¥\n        orderBy: { createdAt: \"desc\" }\n      }\n    }\n  });\n\n  if (!user) {\n    redirect(\"/login\");\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-10\">\n      <div className=\"max-w-5xl mx-auto px-4\">\n        \n        {/* ÏÉÅÎã® ÌîÑÎ°úÌïÑ ÏöîÏïΩ */}\n        <div className=\"bg-white p-8 rounded-2xl shadow-sm border border-gray-100 mb-8 flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-1\">\n              Î∞òÍ∞ëÏäµÎãàÎã§, <span className=\"text-blue-600\">{user.name || \"Í≥†Í∞ù\"}</span>Îãò!\n            </h1>\n            <p className=\"text-gray-500\">{user.email}</p>\n          </div>\n          <Link href=\"/listing/new\">\n            <button className=\"bg-blue-600 text-white px-5 py-2.5 rounded-xl font-medium hover:bg-blue-700 transition\">\n              ÏÉà Îß§Î¨º Îì±Î°ùÌïòÍ∏∞\n            </button>\n          </Link>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          \n          {/* Ï¢åÏ∏° (Îì±Î°ù Îß§Î¨º & Í¥ÄÏã¨ Îß§Î¨º) */}\n          <div className=\"lg:col-span-2 space-y-8\">\n            \n            {/* ÎÇ¥Í∞Ä Îì±Î°ùÌïú Îß§Î¨º ÏÑπÏÖò */}\n            <section className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100\">\n              <h2 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\n                üè† ÎÇ¥Í∞Ä Îì±Î°ùÌïú Îß§Î¨º <span className=\"text-blue-600\">{user.listings.length}</span>\n              </h2>\n              {user.listings.length === 0 ? (\n                <div className=\"py-10 text-center text-gray-500 bg-gray-50 rounded-xl\">\n                  Îì±Î°ùÌïú Îß§Î¨ºÏù¥ ÏóÜÏäµÎãàÎã§.\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {user.listings.map((listing) => (\n                    <Link key={listing.id} href={`/listing/${listing.id}`} className=\"block\">\n                      <div className=\"border p-4 rounded-xl hover:border-blue-300 hover:bg-blue-50 transition flex justify-between items-center group\">\n                        <div>\n                          <div className=\"font-bold text-gray-900 group-hover:text-blue-700 transition\">\n                            {listing.title}\n                          </div>\n                          <div className=\"text-sm text-gray-500 mt-1\">\n                            {listing.address_area} ¬∑ {(listing.goodwill_price! / 10000).toLocaleString()}ÎßåÏõê\n                          </div>\n                        </div>\n                        <div className=\"text-gray-400 group-hover:text-blue-600\">\n                          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 5l7 7-7 7\"></path></svg>\n                        </div>\n                      </div>\n                    </Link>\n                  ))}\n                </div>\n              )}\n            </section>\n\n            {/* Í¥ÄÏã¨ Îß§Î¨º (UI ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî) */}\n            <section className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100\">\n              <h2 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\n                ‚ù§Ô∏è Í¥ÄÏã¨ Îß§Î¨º (Ï∞ú) <span className=\"text-red-500\">{user.favorites?.length || 0}</span>\n              </h2>\n              {!user.favorites || user.favorites.length === 0 ? (\n                <div className=\"py-10 text-center text-gray-500 bg-gray-50 rounded-xl\">\n                  ÏïÑÏßÅ Ï∞úÌïú Îß§Î¨ºÏù¥ ÏóÜÏäµÎãàÎã§.\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {user.favorites.map((fav) => (\n                    <Link key={fav.id} href={`/listing/${fav.listing.id}`} className=\"block\">\n                      <div className=\"border p-4 rounded-xl hover:border-red-300 hover:bg-red-50 transition flex justify-between items-center group\">\n                        <div>\n                          <div className=\"font-bold text-gray-900 group-hover:text-red-700 transition\">\n                            {fav.listing.title}\n                          </div>\n                          <div className=\"text-sm text-gray-500 mt-1\">\n                            {fav.listing.address_area} ¬∑ {(fav.listing.goodwill_price! / 10000).toLocaleString()}ÎßåÏõê\n                          </div>\n                        </div>\n                        <div className=\"text-red-300 group-hover:text-red-500 transition\">\n                           <svg className=\"w-6 h-6 fill-current\" viewBox=\"0 0 24 24\"><path d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"/></svg>\n                        </div>\n                      </div>\n                    </Link>\n                  ))}\n                </div>\n              )}\n            </section>\n\n          </div>\n\n          {/* Ïö∞Ï∏° (Ï±ÑÌåÖ Î¨∏Ïùò ÎÇ¥Ïó≠) */}\n          <div className=\"lg:col-span-1\">\n            <section className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 sticky top-24\">\n              <h2 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\n                üí¨ ÎÇòÏùò Î¨∏Ïùò ÎÇ¥Ïó≠ <span className=\"text-blue-600\">{user.threads.length}</span>\n              </h2>\n              {user.threads.length === 0 ? (\n                <div className=\"py-8 text-center text-gray-500 bg-gray-50 rounded-xl\">\n                  ÏßÑÌñâ Ï§ëÏù∏ ÎåÄÌôîÍ∞Ä ÏóÜÏäµÎãàÎã§.\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {user.threads.map((thread) => (\n                    <Link key={thread.id} href={`/chat/${thread.id}`} className=\"block\">\n                      <div className=\"p-3 border rounded-xl hover:border-blue-400 transition\">\n                        <div className=\"text-xs font-semibold text-blue-600 mb-1 bg-blue-50 inline-block px-2 py-0.5 rounded\">\n                          {thread.type === \"listing\" ? \"Îß§Î¨º Î¨∏Ïùò\" : \"ÏÉÅÎã¥\"}\n                        </div>\n                        <div className=\"font-medium text-gray-800 line-clamp-1\">\n                          {thread.title || thread.listing?.title || \"Ï±ÑÌåÖÎ∞©\"}\n                        </div>\n                        <div className=\"text-xs text-gray-400 mt-2\">\n                          {new Date(thread.createdAt).toLocaleDateString()}\n                        </div>\n                      </div>\n                    </Link>\n                  ))}\n                </div>\n              )}\n            </section>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}