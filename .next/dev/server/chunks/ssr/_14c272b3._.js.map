{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.0/components/RevenueBadge.tsx"],"sourcesContent":["export default function RevenueBadge() {\n    return (\n      <span className=\"inline-flex items-center gap-1 px-2 py-1 rounded-md bg-green-100 text-green-700 text-xs font-bold border border-green-200 shadow-sm\">\n        ‚úÖ Îß§Ï∂ú Ïù∏Ï¶ù\n      </span>\n    );\n  }"],"names":[],"mappings":";;;;;;AAAe,SAAS;IACpB,qBACE,8OAAC;QAAK,WAAU;kBAAsI;;;;;;AAI1J","debugId":null}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.0/app/listing/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport RevenueBadge from \"@/components/RevenueBadge\";\nimport Image from \"next/image\";\nimport { useRouter } from \"next/navigation\";\nimport { use, useEffect, useState } from \"react\";\n\nexport default function ListingDetailPage({ \n  params \n}: { \n  params: Promise<{ id: string }> \n}) {\n  const router = useRouter();\n  const resolvedParams = use(params); // Next.js 15+ Î∞©Ïãù\n  \n  const [listing, setListing] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n\n  // Îç∞Ïù¥ÌÑ∞ Î°úÎìú\n  useEffect(() => {\n    async function fetchDetail() {\n      try {\n        setLoading(true);\n        // API Í≤ΩÎ°úÎ•º /api/listings/[id] Î°ú Ìò∏Ï∂ú\n        const res = await fetch(`/api/listings/${resolvedParams.id}`, {\n          cache: 'no-store'\n        });\n        \n        if (!res.ok) throw new Error(\"Not Found\");\n        \n        const data = await res.json();\n        setListing(data);\n      } catch (e) {\n        console.error(\"Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìå®:\", e);\n        setError(true);\n      } finally {\n        setLoading(false);\n      }\n    }\n    if (resolvedParams.id) fetchDetail();\n  }, [resolvedParams.id]);\n\n  // Ï±ÑÌåÖÎ∞© ÏÉùÏÑ± Ìï®Ïàò\n  const startChat = async (type: string) => {\n    if (!listing) return;\n    try {\n      const res = await fetch(\"/api/chat/threads\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          type,\n          listingId: listing.id,\n          title: listing.title,\n        }),\n      });\n\n      // ÏÑúÎ≤ÑÏóêÏÑú 401(Unauthorized)ÏùÑ Î≥¥ÎÇ∏ Í≤ΩÏö∞\n      if (res.status === 401) {\n        alert(\"Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌïú ÏÑúÎπÑÏä§ÏûÖÎãàÎã§.\");\n        router.push(`/login?callbackUrl=/listing/${listing.id}`);\n        return;\n      }\n\n      const data = await res.json();\n      if (data.thread?.id) {\n        // ÏÑ±Í≥µ Ïãú Ï±ÑÌåÖÎ∞©ÏúºÎ°ú Ïù¥Îèô\n        router.push(`/chat/${data.thread.id}?role=user`);\n      }\n    } catch (e) {\n      console.error(e);\n      alert(\"Ïó∞Í≤∞ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.\");\n    }\n  };\n\n  if (loading) return <div className=\"p-20 text-center text-gray-500 font-medium\">Îß§Î¨º Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...</div>;\n  \n  if (error || !listing) return (\n    <div className=\"p-20 text-center\">\n      <h2 className=\"text-xl font-bold mb-2\">Îß§Î¨ºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.</h2>\n      <button onClick={() => router.push('/listing')} className=\"bg-blue-600 text-white px-6 py-2 rounded-lg mt-4\">Î™©Î°ùÏúºÎ°ú Ïù¥Îèô</button>\n    </div>\n  );\n\n  const photos = listing.photos ? (typeof listing.photos === 'string' ? JSON.parse(listing.photos) : listing.photos) : [];\n  const fmt = (n: number | null) => n?.toLocaleString() ?? \"-\";\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 pb-20\">\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* 1. Ïù¥ÎØ∏ÏßÄ Í∞§Îü¨Î¶¨ */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 h-[400px] mb-8 overflow-hidden rounded-2xl shadow-md bg-white\">\n          <div className=\"relative h-full bg-gray-100\">\n            {photos[0] ? (\n              <Image src={photos[0]} alt=\"Î©îÏù∏\" fill className=\"object-cover\" />\n            ) : <div className=\"grid place-items-center h-full text-gray-400\">Ïù¥ÎØ∏ÏßÄ ÏóÜÏùå</div>}\n          </div>\n          <div className=\"hidden md:grid grid-cols-2 grid-rows-2 gap-4 h-full\">\n            {[1, 2, 3, 4].map((i) => (\n              <div key={i} className=\"relative bg-gray-100 border-l border-white\">\n                {photos[i] && <Image src={photos[i]} alt=\"ÏÑúÎ∏å\" fill className=\"object-cover\" />}\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* 2. Î©îÏù∏ Ï†ïÎ≥¥ Ïª®ÌÖêÏ∏† */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          <div className=\"lg:col-span-2 space-y-8\">\n            <div className=\"bg-white p-8 rounded-2xl border border-gray-100 shadow-sm\">\n              {listing.isRevenueVerified && <div className=\"mb-2\"><RevenueBadge /></div>}\n              <h1 className=\"text-3xl font-bold text-gray-900\">{listing.title}</h1>\n              <p className=\"text-gray-500 mt-2 text-lg\">{listing.address_area} ¬∑ {listing.sector}</p>\n              \n              <div className=\"grid grid-cols-3 gap-4 mt-8 pt-8 border-t border-gray-100 text-center\">\n                <div>\n                  <p className=\"text-gray-400 text-sm\">Í∂åÎ¶¨Í∏à</p>\n                  <p className=\"text-2xl font-bold text-blue-600\">{fmt(listing.goodwill_price)}Îßå</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-400 text-sm\">Î≥¥Ï¶ùÍ∏à/ÏõîÏÑ∏</p>\n                  <p className=\"text-2xl font-bold text-gray-800\">{fmt(listing.deposit)}/{fmt(listing.rent_monthly)}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-400 text-sm\">Î©¥Ï†Å</p>\n                  <p className=\"text-2xl font-bold text-gray-800\">{listing.area_pyeong || 0}Ìèâ</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white p-8 rounded-2xl border border-gray-100 shadow-sm\">\n              <h2 className=\"text-xl font-bold mb-4\">ÏÉÅÏÑ∏ ÏÑ§Î™Ö</h2>\n              <p className=\"text-gray-700 leading-relaxed whitespace-pre-wrap\">{listing.description || \"ÏÉÅÏÑ∏ ÏÑ§Î™ÖÏù¥ ÏóÜÏäµÎãàÎã§.\"}</p>\n            </div>\n          </div>\n\n          {/* 3. Ïö∞Ï∏° Í≥†Ï†ï Î¨∏ÏùòÎ∞î */}\n          <div className=\"space-y-4\">\n            <div className=\"bg-white p-6 rounded-2xl border border-gray-200 sticky top-24 shadow-lg ring-1 ring-black/5\">\n              <h3 className=\"text-lg font-bold mb-4\">Ï†ÑÎ¨∏Í∞Ä ÏÉÅÎã¥</h3>\n              <div className=\"space-y-3\">\n                <button \n                  onClick={() => startChat(\"listing\")}\n                  className=\"w-full bg-blue-600 text-white py-4 rounded-xl font-bold text-lg hover:bg-blue-700 transition-all active:scale-95 shadow-md shadow-blue-100\"\n                >\n                  üí¨ Ïã§ÏãúÍ∞Ñ Ï±ÑÌåÖ Î¨∏Ïùò\n                </button>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  <button onClick={() => startChat(\"loan\")} className=\"bg-gray-50 py-3 rounded-xl font-medium text-gray-700 hover:bg-gray-100 border border-gray-200\">üí∞ ÎåÄÏ∂ú ÏÉÅÎã¥</button>\n                  <button onClick={() => startChat(\"fitout\")} className=\"bg-gray-50 py-3 rounded-xl font-medium text-gray-700 hover:bg-gray-100 border border-gray-200\">üî® Ïù∏ÌÖåÎ¶¨Ïñ¥</button>\n                </div>\n                <p className=\"text-center text-[10px] text-gray-400 mt-6 tracking-widest uppercase\">Item No. {listing.id}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}