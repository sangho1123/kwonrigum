{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.0/lib/db.ts"],"sourcesContent":["// lib/db.ts\nimport { PrismaClient } from \"@prisma/client\";\n\nconst globalForPrisma = globalThis as unknown as { prisma?: PrismaClient };\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: process.env.NODE_ENV === \"development\" ? [\"query\", \"error\", \"warn\"] : [\"error\"],\n  });\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":"AAAA,YAAY;;;;;AACZ;;AAEA,MAAM,kBAAkB;AAEjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;AAC7E;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.0/app/api/chat/threads/%5Bid%5D/messages/route.ts"],"sourcesContent":["// app/api/chat/threads/[id]/messages/route.ts\nimport { prisma } from \"@/lib/db\";\nimport { NextResponse } from \"next/server\";\n\ntype Ctx = { params: Promise<{ id: string }> };\n\nexport async function GET(_req: Request, ctx: Ctx) {\n  try {\n    const { id } = await ctx.params;\n    const items = await prisma.message.findMany({\n      where: { threadId: id },\n      orderBy: { at: \"asc\" },\n      select: { id: true, from: true, text: true, at: true },\n    });\n    return NextResponse.json({ ok: true, items });\n  } catch (e: any) {\n    return NextResponse.json(\n      { ok: false, error: e?.message ?? \"server error\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function POST(req: Request, ctx: Ctx) {\n  try {\n    const { id } = await ctx.params;\n    const { from = \"user\", text = \"\" } = await req.json();\n    if (!text?.trim())\n      return NextResponse.json(\n        { ok: false, error: \"text is required\" },\n        { status: 400 }\n      );\n\n    const item = await prisma.message.create({\n      data: { threadId: id, from: String(from), text: String(text) },\n      select: { id: true, from: true, text: true, at: true },\n    });\n    return NextResponse.json({ ok: true, item });\n  } catch (e: any) {\n    return NextResponse.json(\n      { ok: false, error: e?.message ?? \"server error\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":"AAAA,8CAA8C;;;;;;;AAC9C;AACA;;;AAIO,eAAe,IAAI,IAAa,EAAE,GAAQ;IAC/C,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM,IAAI,MAAM;QAC/B,MAAM,QAAQ,MAAM,qHAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;YAC1C,OAAO;gBAAE,UAAU;YAAG;YACtB,SAAS;gBAAE,IAAI;YAAM;YACrB,QAAQ;gBAAE,IAAI;gBAAM,MAAM;gBAAM,MAAM;gBAAM,IAAI;YAAK;QACvD;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAM;QAAM;IAC7C,EAAE,OAAO,GAAQ;QACf,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,IAAI;YAAO,OAAO,GAAG,WAAW;QAAe,GACjD;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,GAAY,EAAE,GAAQ;IAC/C,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM,IAAI,MAAM;QAC/B,MAAM,EAAE,OAAO,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,IAAI,IAAI;QACnD,IAAI,CAAC,MAAM,QACT,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,IAAI;YAAO,OAAO;QAAmB,GACvC;YAAE,QAAQ;QAAI;QAGlB,MAAM,OAAO,MAAM,qHAAM,CAAC,OAAO,CAAC,MAAM,CAAC;YACvC,MAAM;gBAAE,UAAU;gBAAI,MAAM,OAAO;gBAAO,MAAM,OAAO;YAAM;YAC7D,QAAQ;gBAAE,IAAI;gBAAM,MAAM;gBAAM,MAAM;gBAAM,IAAI;YAAK;QACvD;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAM;QAAK;IAC5C,EAAE,OAAO,GAAQ;QACf,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,IAAI;YAAO,OAAO,GAAG,WAAW;QAAe,GACjD;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}