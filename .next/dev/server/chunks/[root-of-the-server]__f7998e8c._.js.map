{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.0/lib/db.ts"],"sourcesContent":["// lib/db.ts\nimport { PrismaClient } from \"@prisma/client\";\n\nconst globalForPrisma = globalThis as unknown as { prisma?: PrismaClient };\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: process.env.NODE_ENV === \"development\" ? [\"query\", \"error\", \"warn\"] : [\"error\"],\n  });\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":"AAAA,YAAY;;;;;AACZ;;AAEA,MAAM,kBAAkB;AAEjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;AAC7E;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sanghojeong/Desktop/Projects/%EA%B6%8C%EB%A6%AC%EA%B8%88%EC%A4%91%EA%B0%9C%EC%95%B1/shop-transfer-1.0/app/api/chat/threads/%5Bid%5D/read/route.ts"],"sourcesContent":["// app/api/chat/threads/[id]/read/route.ts\nimport { prisma } from \"@/lib/db\";\nimport { NextResponse } from \"next/server\";\n\ntype Ctx = { params: Promise<{ id: string }> };\n\nexport async function POST(req: Request, ctx: Ctx) {\n  try {\n    const { id } = await ctx.params;\n    const url = new URL(req.url);\n    const role = url.searchParams.get(\"role\") === \"admin\" ? \"admin\" : \"user\";\n\n    const thread = await prisma.thread.update({\n      where: { id },\n      data:\n        role === \"admin\"\n          ? { lastAdminReadAt: new Date() }\n          : { lastUserReadAt: new Date() },\n      select: { id: true, lastAdminReadAt: true, lastUserReadAt: true },\n    });\n\n    return NextResponse.json({ ok: true, thread });\n  } catch (e: any) {\n    return NextResponse.json(\n      { ok: false, error: e?.message ?? \"server error\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":"AAAA,0CAA0C;;;;;AAC1C;AACA;;;AAIO,eAAe,KAAK,GAAY,EAAE,GAAQ;IAC/C,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM,IAAI,MAAM;QAC/B,MAAM,MAAM,IAAI,IAAI,IAAI,GAAG;QAC3B,MAAM,OAAO,IAAI,YAAY,CAAC,GAAG,CAAC,YAAY,UAAU,UAAU;QAElE,MAAM,SAAS,MAAM,qHAAM,CAAC,MAAM,CAAC,MAAM,CAAC;YACxC,OAAO;gBAAE;YAAG;YACZ,MACE,SAAS,UACL;gBAAE,iBAAiB,IAAI;YAAO,IAC9B;gBAAE,gBAAgB,IAAI;YAAO;YACnC,QAAQ;gBAAE,IAAI;gBAAM,iBAAiB;gBAAM,gBAAgB;YAAK;QAClE;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAM;QAAO;IAC9C,EAAE,OAAO,GAAQ;QACf,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,IAAI;YAAO,OAAO,GAAG,WAAW;QAAe,GACjD;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}